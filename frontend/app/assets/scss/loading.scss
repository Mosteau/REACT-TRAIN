// Styles pour les états de chargement
@use 'variables' as *;

.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: $space-16 $space-4;
  text-align: center;
  
  .loading-spinner {
    width: 48px;
    height: 48px;
    border: 4px solid $border-light;
    border-top: 4px solid $primary-blue;
    border-radius: $radius-full;
    animation: spin 1s linear infinite;
    margin-bottom: $space-4;
  }
  
  .loading-text {
    color: $text-secondary;
    font-size: $font-size-base;
    font-weight: $font-weight-medium;
  }
  
  // Variantes de taille
  &.small {
    padding: $space-8 $space-4;
    
    .loading-spinner {
      width: 32px;
      height: 32px;
      border-width: 3px;
    }
    
    .loading-text {
      font-size: $font-size-sm;
    }
  }
  
  &.large {
    padding: $space-16 $space-4;
    
    .loading-spinner {
      width: 64px;
      height: 64px;
      border-width: 5px;
    }
    
    .loading-text {
      font-size: $font-size-lg;
    }
  }
}

// Spinner inline pour boutons
.inline-spinner {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid transparent;
  border-top: 2px solid currentColor;
  border-radius: $radius-full;
  animation: spin 0.8s linear infinite;
  margin-right: $space-2;
}

// Skeleton loading pour les cartes
.skeleton-card {
  @include card;
  animation: pulse 1.5s ease-in-out infinite;
  
  .skeleton-header {
    height: 24px;
    background-color: $bg-tertiary;
    border-radius: $radius-sm;
    margin-bottom: $space-4;
    width: 70%;
  }
  
  .skeleton-content {
    .skeleton-line {
      height: 16px;
      background-color: $bg-tertiary;
      border-radius: $radius-sm;
      margin-bottom: $space-3;
      
      &:nth-child(1) { width: 100%; }
      &:nth-child(2) { width: 85%; }
      &:nth-child(3) { width: 60%; }
    }
  }
  
  .skeleton-footer {
    height: 20px;
    background-color: $bg-tertiary;
    border-radius: $radius-sm;
    width: 40%;
    margin-top: $space-4;
  }
}

// Grid de skeleton cards
.skeleton-grid {
  @include grid-responsive;
  
  .skeleton-card {
    animation-delay: calc(var(--index) * 0.1s);
  }
}

// Loading overlay pour les formulaires
.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba($bg-primary, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
  border-radius: inherit;
  
  .overlay-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: $space-3;
    
    .loading-spinner {
      width: 32px;
      height: 32px;
      border: 3px solid $border-light;
      border-top: 3px solid $primary-blue;
      border-radius: $radius-full;
      animation: spin 1s linear infinite;
    }
    
    .loading-message {
      color: $text-secondary;
      font-size: $font-size-sm;
      font-weight: $font-weight-medium;
    }
  }
}

// Animations
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes shimmer {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}

// Effet shimmer pour les skeletons
.skeleton-shimmer {
  background: linear-gradient(90deg, $bg-tertiary 25%, $bg-secondary 50%, $bg-tertiary 75%);
  background-size: 200px 100%;
  animation: shimmer 1.5s infinite;
}

// États de chargement pour différents composants
.button-loading {
  position: relative;
  color: transparent !important;
  
  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 16px;
    height: 16px;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: $radius-full;
    animation: spin 0.8s linear infinite;
    color: $text-white;
  }
}

.input-loading {
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    right: $space-3;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    border: 2px solid $border-light;
    border-top: 2px solid $primary-blue;
    border-radius: $radius-full;
    animation: spin 1s linear infinite;
  }
}

// Responsive
@media (max-width: $breakpoint-sm) {
  .loading-container {
    padding: $space-12 $space-4;
    
    &.large {
      padding: $space-16 $space-4;
      
      .loading-spinner {
        width: 48px;
        height: 48px;
        border-width: 4px;
      }
    }
  }
}